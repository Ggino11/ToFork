{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ginot/Documents/Magistrale/TAAS/ToFork/src/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\n/* import '@/utils/fixLeafletIcon'; */\r\nimport 'leaflet/dist/leaflet.css';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\n\r\ninterface Restaurant {\r\n  id: number;\r\n  lat: number;\r\n  lon: number;\r\n  name?: string;\r\n  opening_hours?: string;\r\n  phone?: string;\r\n  cuisine?: string;\r\n}\r\n\r\nexport default function TorinoRestaurantsMap() {\r\n  const [restaurants, setRestaurants] = useState<Restaurant[]>([]);\r\n\r\n  useEffect(() => {\r\n    import('@/utils/fixLeafletIcon');\r\n    const query = `\r\n      [out:json][timeout:25];\r\n      area[\"name\"=\"Torino\"][\"boundary\"=\"administrative\"]->.searchArea;\r\n      (\r\n        node[\"amenity\"=\"restaurant\"](area.searchArea);\r\n        way[\"amenity\"=\"restaurant\"](area.searchArea);\r\n        relation[\"amenity\"=\"restaurant\"](area.searchArea);\r\n      );\r\n      out center;\r\n    `;\r\n\r\n    fetch('https://overpass-api.de/api/interpreter', {\r\n      method: 'POST',\r\n      body: query,\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        const places: Restaurant[] = data.elements\r\n        .map((el: any) => {\r\n          let lat = el.lat;\r\n          let lon = el.lon;\r\n          if (!lat && el.center) {\r\n            lat = el.center.lat;\r\n            lon = el.center.lon;\r\n          }\r\n          return {\r\n            id: el.id,\r\n            lat,\r\n            lon,\r\n            name: el.tags?.name,\r\n            opening_hours: el.tags?.opening_hours,\r\n            phone: el.tags?.phone || el.tags?.['contact:phone'],\r\n            website: el.tags?.website,\r\n            cuisine: el.tags?.cuisine,\r\n          };\r\n        })\r\n        .filter((el: any) => el.lat && el.lon && el.name)\r\n        .slice(0, 50); // prendi solo i primi 50\r\n\r\n        setRestaurants(places);\r\n      })\r\n      .catch(console.error);\r\n  }, []);\r\n\r\n  const torinoCenter: [number, number] = [45.0703, 7.6869];\r\n\r\n  return (\r\n    <main>\r\n      <h2>Ristoranti a Torino</h2>\r\n      <MapContainer center={torinoCenter} zoom={13} style={{ height: '600px', width: '100%' }}>\r\n        <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" attribution=\"&copy; OpenStreetMap contributors\" />\r\n        {restaurants.map(r => (\r\n          <Marker key={r.id} position={[r.lat, r.lon]}>\r\n            <Popup>\r\n              <strong>{r.name}</strong><br />\r\n              {r.cuisine && <>üçΩ {r.cuisine}<br /></>}\r\n              {r.opening_hours && <>üïí {r.opening_hours}<br /></>}\r\n              {r.phone && <>üìû {r.phone}<br /></>}\r\n            </Popup>\r\n\r\n          </Marker>\r\n        ))}\r\n      </MapContainer>\r\n    </main>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAEA;AAGA;AAAA;AAAA;AAAA;AALA;;;;;AAiBe,SAAS;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAgB,EAAE;IAE/D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;;QAER,MAAM,QAAQ,CAAC;;;;;;;;;IASf,CAAC;QAED,MAAM,2CAA2C;YAC/C,QAAQ;YACR,MAAM;QACR,GACG,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA;YACJ,MAAM,SAAuB,KAAK,QAAQ,CACzC,GAAG,CAAC,CAAC;gBACJ,IAAI,MAAM,GAAG,GAAG;gBAChB,IAAI,MAAM,GAAG,GAAG;gBAChB,IAAI,CAAC,OAAO,GAAG,MAAM,EAAE;oBACrB,MAAM,GAAG,MAAM,CAAC,GAAG;oBACnB,MAAM,GAAG,MAAM,CAAC,GAAG;gBACrB;gBACA,OAAO;oBACL,IAAI,GAAG,EAAE;oBACT;oBACA;oBACA,MAAM,GAAG,IAAI,EAAE;oBACf,eAAe,GAAG,IAAI,EAAE;oBACxB,OAAO,GAAG,IAAI,EAAE,SAAS,GAAG,IAAI,EAAE,CAAC,gBAAgB;oBACnD,SAAS,GAAG,IAAI,EAAE;oBAClB,SAAS,GAAG,IAAI,EAAE;gBACpB;YACF,GACC,MAAM,CAAC,CAAC,KAAY,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,EAC/C,KAAK,CAAC,GAAG,KAAK,yBAAyB;YAExC,eAAe;QACjB,GACC,KAAK,CAAC,QAAQ,KAAK;IACxB,GAAG,EAAE;IAEL,MAAM,eAAiC;QAAC;QAAS;KAAO;IAExD,qBACE,8OAAC;;0BACC,8OAAC;0BAAG;;;;;;0BACJ,8OAAC,uJAAA,CAAA,eAAY;gBAAC,QAAQ;gBAAc,MAAM;gBAAI,OAAO;oBAAE,QAAQ;oBAAS,OAAO;gBAAO;;kCACpF,8OAAC,oJAAA,CAAA,YAAS;wBAAC,KAAI;wBAAqD,aAAY;;;;;;oBAC/E,YAAY,GAAG,CAAC,CAAA,kBACf,8OAAC,iJAAA,CAAA,SAAM;4BAAY,UAAU;gCAAC,EAAE,GAAG;gCAAE,EAAE,GAAG;6BAAC;sCACzC,cAAA,8OAAC,gJAAA,CAAA,QAAK;;kDACJ,8OAAC;kDAAQ,EAAE,IAAI;;;;;;kDAAU,8OAAC;;;;;oCACzB,EAAE,OAAO,kBAAI;;4CAAE;4CAAI,EAAE,OAAO;0DAAC,8OAAC;;;;;;;oCAC9B,EAAE,aAAa,kBAAI;;4CAAE;4CAAI,EAAE,aAAa;0DAAC,8OAAC;;;;;;;oCAC1C,EAAE,KAAK,kBAAI;;4CAAE;4CAAI,EAAE,KAAK;0DAAC,8OAAC;;;;;;;;;;;;;2BALlB,EAAE,EAAE;;;;;;;;;;;;;;;;;AAa3B","debugId":null}}]
}