{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ginot/Documents/Magistrale/TAAS/ToFork/src/app/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\n/* import '@/utils/fixLeafletIcon'; */\r\nimport 'leaflet/dist/leaflet.css';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\n\r\ninterface Restaurant {\r\n  id: number;\r\n  lat: number;\r\n  lon: number;\r\n  name?: string;\r\n  opening_hours?: string;\r\n  phone?: string;\r\n  cuisine?: string;\r\n}\r\n\r\nexport default function TorinoRestaurantsMap() {\r\n  const [restaurants, setRestaurants] = useState<Restaurant[]>([]);\r\n\r\n  useEffect(() => {\r\n    import('@/utils/fixLeafletIcon');\r\n    const query = `\r\n      [out:json][timeout:25];\r\n      area[\"name\"=\"Torino\"][\"boundary\"=\"administrative\"]->.searchArea;\r\n      (\r\n        node[\"amenity\"=\"restaurant\"](area.searchArea);\r\n        way[\"amenity\"=\"restaurant\"](area.searchArea);\r\n        relation[\"amenity\"=\"restaurant\"](area.searchArea);\r\n      );\r\n      out center;\r\n    `;\r\n\r\n    fetch('https://overpass-api.de/api/interpreter', {\r\n      method: 'POST',\r\n      body: query,\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        const places: Restaurant[] = data.elements\r\n        .map((el: any) => {\r\n          let lat = el.lat;\r\n          let lon = el.lon;\r\n          if (!lat && el.center) {\r\n            lat = el.center.lat;\r\n            lon = el.center.lon;\r\n          }\r\n          return {\r\n            id: el.id,\r\n            lat,\r\n            lon,\r\n            name: el.tags?.name,\r\n            opening_hours: el.tags?.opening_hours,\r\n            phone: el.tags?.phone || el.tags?.['contact:phone'],\r\n            website: el.tags?.website,\r\n            cuisine: el.tags?.cuisine,\r\n          };\r\n        })\r\n        .filter((el: any) => el.lat && el.lon && el.name)\r\n        .slice(0, 50); // prendi solo i primi 50\r\n\r\n        setRestaurants(places);\r\n      })\r\n      .catch(console.error);\r\n  }, []);\r\n\r\n  const torinoCenter: [number, number] = [45.0703, 7.6869];\r\n\r\n  return (\r\n    <main>\r\n      <h2>Ristoranti a Torino</h2>\r\n      <MapContainer center={torinoCenter} zoom={13} style={{ height: '600px', width: '100%' }}>\r\n        <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" attribution=\"&copy; OpenStreetMap contributors\" />\r\n        {restaurants.map(r => (\r\n          <Marker key={r.id} position={[r.lat, r.lon]}>\r\n            <Popup>\r\n              <strong>{r.name}</strong><br />\r\n              {r.cuisine && <>üçΩ {r.cuisine}<br /></>}\r\n              {r.opening_hours && <>üïí {r.opening_hours}<br /></>}\r\n              {r.phone && <>üìû {r.phone}<br /></>}\r\n            </Popup>\r\n\r\n          </Marker>\r\n        ))}\r\n      </MapContainer>\r\n    </main>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAEA;AAGA;AAAA;AAAA;AAAA;;;AALA;;;;AAiBe,SAAS;;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAgB,EAAE;IAE/D,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0CAAE;;YAER,MAAM,QAAS;YAWf,MAAM,2CAA2C;gBAC/C,QAAQ;gBACR,MAAM;YACR,GACG,IAAI;kDAAC,CAAA,MAAO,IAAI,IAAI;iDACpB,IAAI;kDAAC,CAAA;oBACJ,MAAM,SAAuB,KAAK,QAAQ,CACzC,GAAG;iEAAC,CAAC;gCAWI,UACS,WACR,WAAkB,WAChB,WACA;4BAdX,IAAI,MAAM,GAAG,GAAG;4BAChB,IAAI,MAAM,GAAG,GAAG;4BAChB,IAAI,CAAC,OAAO,GAAG,MAAM,EAAE;gCACrB,MAAM,GAAG,MAAM,CAAC,GAAG;gCACnB,MAAM,GAAG,MAAM,CAAC,GAAG;4BACrB;4BACA,OAAO;gCACL,IAAI,GAAG,EAAE;gCACT;gCACA;gCACA,IAAI,GAAE,WAAA,GAAG,IAAI,cAAP,+BAAA,SAAS,IAAI;gCACnB,aAAa,GAAE,YAAA,GAAG,IAAI,cAAP,gCAAA,UAAS,aAAa;gCACrC,OAAO,EAAA,YAAA,GAAG,IAAI,cAAP,gCAAA,UAAS,KAAK,OAAI,YAAA,GAAG,IAAI,cAAP,gCAAA,SAAS,CAAC,gBAAgB;gCACnD,OAAO,GAAE,YAAA,GAAG,IAAI,cAAP,gCAAA,UAAS,OAAO;gCACzB,OAAO,GAAE,YAAA,GAAG,IAAI,cAAP,gCAAA,UAAS,OAAO;4BAC3B;wBACF;gEACC,MAAM;iEAAC,CAAC,KAAY,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI;gEAC/C,KAAK,CAAC,GAAG,KAAK,yBAAyB;oBAExC,eAAe;gBACjB;iDACC,KAAK,CAAC,QAAQ,KAAK;QACxB;yCAAG,EAAE;IAEL,MAAM,eAAiC;QAAC;QAAS;KAAO;IAExD,qBACE,6LAAC;;0BACC,6LAAC;0BAAG;;;;;;0BACJ,6LAAC,0JAAA,CAAA,eAAY;gBAAC,QAAQ;gBAAc,MAAM;gBAAI,OAAO;oBAAE,QAAQ;oBAAS,OAAO;gBAAO;;kCACpF,6LAAC,uJAAA,CAAA,YAAS;wBAAC,KAAI;wBAAqD,aAAY;;;;;;oBAC/E,YAAY,GAAG,CAAC,CAAA,kBACf,6LAAC,oJAAA,CAAA,SAAM;4BAAY,UAAU;gCAAC,EAAE,GAAG;gCAAE,EAAE,GAAG;6BAAC;sCACzC,cAAA,6LAAC,mJAAA,CAAA,QAAK;;kDACJ,6LAAC;kDAAQ,EAAE,IAAI;;;;;;kDAAU,6LAAC;;;;;oCACzB,EAAE,OAAO,kBAAI;;4CAAE;4CAAI,EAAE,OAAO;0DAAC,6LAAC;;;;;;;oCAC9B,EAAE,aAAa,kBAAI;;4CAAE;4CAAI,EAAE,aAAa;0DAAC,6LAAC;;;;;;;oCAC1C,EAAE,KAAK,kBAAI;;4CAAE;4CAAI,EAAE,KAAK;0DAAC,6LAAC;;;;;;;;;;;;;2BALlB,EAAE,EAAE;;;;;;;;;;;;;;;;;AAa3B;GAtEwB;KAAA","debugId":null}}]
}